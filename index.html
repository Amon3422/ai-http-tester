<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI HTTP Tester</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ” AI HTTP Tester</h1>
            <button id="configToggleBtn" class="btn btn-config">âš™ï¸ Configuration</button>
        </header>

        <!-- Configuration Panel (Hidden by default) -->
        <section class="config-panel hidden" id="configPanel">
            <h2>âš™ï¸ LLM Configuration</h2>
            <div class="config-grid">
                <div class="config-group">
                    <h3>ğŸ§  Smart Model (Injection Points & Payloads)</h3>
                    <div class="input-group">
                        <label for="smartEndpoint">Endpoint URL:</label>
                        <input type="text" id="smartEndpoint" placeholder="http://localhost:11434/v1/chat/completions" class="config-input" />
                    </div>
                    <div class="input-group">
                        <label for="smartModel">Model Name:</label>
                        <input type="text" id="smartModel" placeholder="deepseek-r1:8b" class="config-input" />
                    </div>
                </div>
                <div class="config-group">
                    <h3>âš¡ Fast Model (Response Analysis)</h3>
                    <div class="input-group">
                        <label for="fastEndpoint">Endpoint URL:</label>
                        <input type="text" id="fastEndpoint" placeholder="http://localhost:11434/v1/chat/completions" class="config-input" />
                    </div>
                    <div class="input-group">
                        <label for="fastModel">Model Name:</label>
                        <input type="text" id="fastModel" placeholder="deepseek-r1:1.5b" class="config-input" />
                    </div>
                </div>
            </div>
            <div class="config-actions">
                <button id="saveConfigBtn" class="btn btn-primary">ğŸ’¾ Save Configuration</button>
                <button id="testConfigBtn" class="btn btn-secondary">ğŸ§ª Test Connection</button>
                <span id="configStatus" class="config-status"></span>
            </div>
        </section>

        <!-- AI Chat Section -->
        <section class="ai-chat">
            <h2>ğŸ’¬ AI Chat</h2>
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    <strong>AI:</strong> Hello! Paste an HTTP request below and ask me to test for vulnerabilities.
                </div>
            </div>
            <div class="chat-input-container">
                <input 
                    type="text" 
                    id="chatInput" 
                    placeholder="Type prompt... (e.g., 'find injection points' or 'give me SQLi payloads')" 
                    class="chat-input"
                />
                <button id="askAiBtn" class="btn btn-primary">Ask AI</button>
            </div>
        </section>

        <!-- Main Content: Request and Response Panels -->
        <div class="main-content">
            <!-- Request Panel -->
            <section class="panel request-panel">
                <h2>ğŸ“ REQUEST</h2>
                <textarea 
                    id="requestEditor" 
                    class="editor" 
                    placeholder="Paste your raw HTTP request here...

Example:
POST /api/download HTTP/1.1
Host: example.com
Cookie: session=abc123
Content-Type: application/json

{&quot;filename&quot;: &quot;report.pdf&quot;}"
                ></textarea>
                
                <div class="payload-controls">
                    <label for="injectionPointSelect">Target:</label>
                    <select id="injectionPointSelect" class="payload-select">
                        <option value="">Auto (first parameter)</option>
                    </select>
                </div>

                <div class="payload-controls">
                    <label for="payloadSelect">Payload:</label>
                    <select id="payloadSelect" class="payload-select">
                        <option value="">No payload selected</option>
                    </select>
                </div>

                <button id="sendRequestBtn" class="btn btn-send">ğŸš€ Send Request</button>
            </section>

            <!-- Response Panel -->
            <section class="panel response-panel">
                <h2>ğŸ“¨ RESPONSE</h2>
                <textarea 
                    id="responseEditor" 
                    class="editor" 
                    placeholder="Response will appear here..."
                    readonly
                ></textarea>

                <div id="analysisResult" class="analysis-result hidden">
                    <div class="verdict-badge" id="verdictBadge">
                        <span id="verdictIcon"></span>
                        <span id="verdictText"></span>
                    </div>
                    <div class="confidence">
                        Confidence: <span id="confidenceLevel">-</span>
                    </div>
                    <div class="evidence">
                        <strong>Evidence:</strong>
                        <ul id="evidenceList"></ul>
                    </div>
                </div>  

                <button id="analyzeBtn" class="btn btn-analyze">ğŸ” Analyze Response</button>
            </section>
        </div>

        <!-- History Table -->
        <section class="history-section">
            <div class="history-header">
                <h2>ğŸ“Š HISTORY</h2>
                <div class="history-actions">
                    <button id="exportHistoryBtn" class="btn btn-secondary">ğŸ’¾ Export</button>
                    <button id="clearHistoryBtn" class="btn btn-danger">ğŸ—‘ï¸ Clear</button>
                </div>
            </div>
            <div class="table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Payload</th>
                            <th>Status</th>
                            <th>Size</th>
                            <th>Verdict</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <tr class="empty-state">
                            <td colspan="6">No tests run yet. Start by sending a request!</td>
                        </tr>   
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>
